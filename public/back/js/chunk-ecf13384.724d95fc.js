(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-ecf13384"],{"556c":function(t,e,a){"use strict";var r=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("el-card",{staticClass:"operate-top-card",attrs:{shadow:"never"}},[a("i",{staticClass:"el-icon-s-order",staticStyle:{"font-size":"18px","margin-right":"3px"}}),a("span",[t._v("添加商品分类")]),a("el-button",{staticClass:"btn-add",attrs:{size:"mini"},on:{click:function(e){return t.$router.back()}}},[t._v("返回")])],1),a("el-card",{staticClass:"form-container"},[a("el-form",{ref:"productCateForm",attrs:{model:t.productCate,rules:t.rules,"label-width":"150px"}},[a("el-form-item",{attrs:{label:"分类名称:",prop:"name"}},[a("el-input",{model:{value:t.productCate.name,callback:function(e){t.$set(t.productCate,"name",e)},expression:"productCate.name"}})],1),a("el-form-item",{attrs:{label:"上级分类:"}},[a("el-select",{attrs:{placeholder:"请选择上级分类"},model:{value:t.productCate.parent_id,callback:function(e){t.$set(t.productCate,"parent_id",e)},expression:"productCate.parent_id"}},t._l(t.selectProductCateList,(function(t){return a("el-option",{key:t.id,attrs:{label:t.name,value:t.id}})})),1)],1),a("el-form-item",{attrs:{label:"数量单位:"}},[a("el-input",{model:{value:t.productCate.product_unit,callback:function(e){t.$set(t.productCate,"product_unit",e)},expression:"productCate.product_unit"}})],1),a("el-form-item",{attrs:{label:"排序:"}},[a("el-input",{model:{value:t.productCate.sort,callback:function(e){t.$set(t.productCate,"sort",e)},expression:"productCate.sort"}})],1),a("el-form-item",{attrs:{label:"分类是否启用:"}},[a("el-radio-group",{model:{value:t.productCate.nav_status,callback:function(e){t.$set(t.productCate,"nav_status",e)},expression:"productCate.nav_status"}},[a("el-radio",{attrs:{label:1}},[t._v("是")]),a("el-radio",{attrs:{label:0}},[t._v("否")])],1)],1),a("el-form-item",{attrs:{label:"移动端显示:"}},[a("el-radio-group",{model:{value:t.productCate.show_status,callback:function(e){t.$set(t.productCate,"show_status",e)},expression:"productCate.show_status"}},[a("el-radio",{attrs:{label:1}},[t._v("是")]),a("el-radio",{attrs:{label:0}},[t._v("否")])],1)],1),a("el-form-item",{attrs:{label:"分类图标:"}},[a("single-upload",{attrs:{uploadAction:"/manager/api/auth/category/upload_category",successCallBack:t.getCategoryIcon,icon:t.productCate.icon}})],1),a("el-form-item",{attrs:{label:"关键字:"}},[a("el-input",{model:{value:t.productCate.keywords,callback:function(e){t.$set(t.productCate,"keywords",e)},expression:"productCate.keywords"}})],1),a("el-form-item",{attrs:{label:"分类描述:"}},[a("el-input",{model:{value:t.productCate.description,callback:function(e){t.$set(t.productCate,"description",e)},expression:"productCate.description"}})],1),a("el-form-item",[a("el-button",{on:{click:function(e){return t.onSubmit("productCateForm")}}},[t._v("提交")]),a("el-button",{on:{click:function(e){return t.onReset("productCateForm")}}},[t._v("重置")])],1)],1)],1)],1)},n=[],o=(a("b0c0"),function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("el-upload",{staticClass:"upload-single",attrs:{action:t.uploadAction,"on-remove":t.handleRemove,"on-success":t.handleSuccess,"on-exceed":t.handleExceed,"file-list":t.fileList,"list-type":"picture",multiple:!1,limit:1}},[a("el-button",{attrs:{size:"small",type:"primary"}},[t._v("点击上传")]),a("div",{staticClass:"el-upload__tip",attrs:{slot:"tip"},slot:"tip"},[t._v("只能上传jpg/png文件，且不超过500kb")])],1)}),s=[],c=(a("baa5"),a("a078")),i={name:"singleUpload",props:{uploadAction:{type:String,required:!0},successCallBack:{type:Function,required:!0},icon:String},data:function(){return{fileList:[]}},watch:{icon:function(t){console.log(t),this.fileList.push({name:t.substr(t.lastIndexOf("/")+1),url:c["a"].BASE_URL+t})}},methods:{handleSuccess:function(t,e,a){1===t.status&&this.successCallBack(t.data)},handleRemove:function(t,e){"success"===t.status&&this.successCallBack(null)},handleExceed:function(){this.$message({message:"只能上传一个图标!",type:"warning",duration:1e3})}}},u=i,l=a("2877"),d=Object(l["a"])(u,o,s,!1,null,"24d0184c",null),p=d.exports,f=a("651a"),m={parent_id:0,name:"",product_unit:"",nav_status:1,show_status:1,sort:1,icon:"",keywords:"",description:""},g={name:"ProductCateAddOrEdit",props:{isUpdate:{type:Boolean,default:!1}},components:{SingleUpload:p},data:function(){return{productCate:Object.assign({},m),rules:{name:[{required:!0,message:"请输入分类名称",trigger:"blur"},{min:3,max:120,message:"长度在 3 到 120 个字符",trigger:"blur"}]},selectProductCateList:[]}},created:function(){var t=this;this.isUpdate?Object(f["d"])(this.$route.query.id).then((function(e){console.log(e),1===e.status&&(t.productCate=e.data[0])})):this.productCate=Object.assign({},m),this.getProductCategoryList()},methods:{getCategoryIcon:function(t){this.productCate.icon=null!==t?t.name:null},getProductCategoryList:function(){var t=this;Object(f["c"])(0,1,100).then((function(e){1===e.status&&(t.selectProductCateList=e.data.category_list,t.selectProductCateList.unshift({id:0,name:"无上级分类"}))}))},onSubmit:function(t){var e=this;this.$refs[t].validate((function(a){if(!a)return e.$message({message:"分类名称不能为空",type:"error",duration:1e3}),!1;e.isUpdate?Object(f["f"])(e.productCate).then((function(a){1===a.status?(e.onReset(t),e.$message({message:a.msg,type:"success",duration:1e3}),e.$router.back()):e.$message({message:a.msg,type:"error",duration:1e3})})):Object(f["a"])(e.productCate).then((function(a){1===a.status?(e.onReset(t),e.$message({message:a.msg,type:"success",duration:1e3}),e.$router.back()):e.$message({message:a.msg,type:"error",duration:1e3})}))}))},onReset:function(t){this.$refs[t].resetFields(),this.productCate=Object.assign({},m),this.getProductCategoryList()}}},b=g,h=Object(l["a"])(b,r,n,!1,null,"2e4dd455",null);e["a"]=h.exports},"651a":function(t,e,a){"use strict";a.d(e,"a",(function(){return n})),a.d(e,"c",(function(){return o})),a.d(e,"b",(function(){return s})),a.d(e,"f",(function(){return c})),a.d(e,"d",(function(){return i})),a.d(e,"e",(function(){return u}));var r=a("365c"),n=function(t){return Object(r["a"])("/api/auth/category/add_category",t,"post")},o=function(t,e,a){return Object(r["a"])("/api/auth/category/get_category",{parent_id:t,page_num:e,page_size:a},"post")},s=function(t){return Object(r["a"])("/api/auth/category/del_category",{id:t},"post")},c=function(t){return Object(r["a"])("/api/auth/category/update_category",t,"post")},i=function(t){return Object(r["a"])("/api/auth/category/get_category_by_id",{id:t},"post")},u=function(){return Object(r["a"])("/api/auth/category/get_category_with_children")}},b0c0:function(t,e,a){var r=a("83ab"),n=a("9bf2").f,o=Function.prototype,s=o.toString,c=/^\s*function ([^ (]*)/,i="name";r&&!(i in o)&&n(o,i,{configurable:!0,get:function(){try{return s.call(this).match(c)[1]}catch(t){return""}}})},baa5:function(t,e,a){var r=a("23e7"),n=a("e58c");r({target:"Array",proto:!0,forced:n!==[].lastIndexOf},{lastIndexOf:n})},c373:function(t,e,a){"use strict";a.r(e);var r=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("product-cate-add-or-edit")},n=[],o=a("556c"),s={name:"add",components:{ProductCateAddOrEdit:o["a"]}},c=s,i=a("2877"),u=Object(i["a"])(c,r,n,!1,null,"b0a7e8dc",null);e["default"]=u.exports},e58c:function(t,e,a){"use strict";var r=a("fc6a"),n=a("a691"),o=a("50c4"),s=a("a640"),c=a("ae40"),i=Math.min,u=[].lastIndexOf,l=!!u&&1/[1].lastIndexOf(1,-0)<0,d=s("lastIndexOf"),p=c("indexOf",{ACCESSORS:!0,1:0}),f=l||!d||!p;t.exports=f?function(t){if(l)return u.apply(this,arguments)||0;var e=r(this),a=o(e.length),s=a-1;for(arguments.length>1&&(s=i(s,n(arguments[1]))),s<0&&(s=a+s);s>=0;s--)if(s in e&&e[s]===t)return s||0;return-1}:u}}]);
//# sourceMappingURL=chunk-ecf13384.724d95fc.js.map