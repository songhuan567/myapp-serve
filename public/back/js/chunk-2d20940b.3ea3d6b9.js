(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2d20940b"],{a7ed:function(t,e,n){"use strict";n.r(e);var a=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("el-card",{staticClass:"operate-top-card",attrs:{shadow:"never"}},[n("i",{staticClass:"el-icon-s-order",staticStyle:{"font-size":"18px","margin-right":"3px"}}),n("span",[t._v("角色列表")]),n("el-button",{staticClass:"btn-add",attrs:{size:"mini"},on:{click:function(e){return t.handleAdd()}}},[t._v("添加")])],1),n("div",{staticClass:"table-container"},[n("el-table",{directives:[{name:"loading",rawName:"v-loading",value:t.listLoading,expression:"listLoading"}],staticStyle:{width:"100%"},attrs:{data:t.listData,border:""}},[n("el-table-column",{attrs:{label:"编号",width:"100",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(t._s(e.$index+1+(t.listQuery.pageNum-1)*t.listQuery.pageSize)+" ")]}}])}),n("el-table-column",{attrs:{label:"角色名称",width:"200",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(t._s(e.row.name))]}}])}),n("el-table-column",{attrs:{label:"角色描述",width:"200",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(t._s(e.row.description))]}}])}),n("el-table-column",{attrs:{label:"添加时间",width:"200",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(t._s(t._f("timeFormat")(e.row.createTime)))]}}])}),n("el-table-column",{attrs:{label:"是否启用",width:"100",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[n("el-switch",{attrs:{"active-value":1,"inactive-value":0},on:{change:function(n){return t.handleShowStatusChange(e.$index,e.row)}},model:{value:e.row.status,callback:function(n){t.$set(e.row,"status",n)},expression:"scope.row.status"}})]}}])}),n("el-table-column",{attrs:{label:"操作",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[n("el-button",{attrs:{size:"mini"},on:{click:function(n){return t.handleSelectMenu(e.$index,e.row)}}},[t._v("分配菜单 ")]),n("el-button",{attrs:{size:"mini"},on:{click:function(n){return t.handleUpdate(e.$index,e.row)}}},[t._v("编辑 ")]),n("el-button",{attrs:{size:"mini",type:"danger"},on:{click:function(n){return t.handleDelete(e.$index,e.row)}}},[t._v(" 删除 ")])]}}])})],1)],1),n("div",{staticClass:"pagination-container"},[n("el-pagination",{attrs:{"current-page":t.listQuery.pageNum,"page-sizes":[5,10,15],"page-size":t.listQuery.pageSize,layout:"total, sizes, prev, pager, next, jumper",total:t.total},on:{"size-change":t.handleSizeChange,"current-change":t.handleCurrentChange}})],1),n("el-dialog",{attrs:{title:t.isEdit?"编辑角色":"添加角色",visible:t.dialogVisible,width:"40%",center:""},on:{"update:visible":function(e){t.dialogVisible=e}}},[n("el-form",{ref:"ruleForm",staticClass:"demo-ruleForm",attrs:{model:t.role,"label-width":"150px"}},[n("el-form-item",{attrs:{label:"角色名称: ",prop:"pass"}},[n("el-input",{staticStyle:{width:"250px"},attrs:{type:"text"},model:{value:t.role.name,callback:function(e){t.$set(t.role,"name",e)},expression:"role.name"}})],1),n("el-form-item",{attrs:{label:"角色描述: ",prop:"checkPass"}},[n("el-input",{staticStyle:{width:"250px"},attrs:{type:"textarea",row:5},model:{value:t.role.description,callback:function(e){t.$set(t.role,"description",e)},expression:"role.description"}})],1),n("el-form-item",{attrs:{label:"是否启用: ",prop:"age"}},[n("el-radio-group",{model:{value:t.role.status,callback:function(e){t.$set(t.role,"status",e)},expression:"role.status"}},[n("el-radio",{attrs:{label:1}},[t._v("是")]),n("el-radio",{attrs:{label:0}},[t._v("否")])],1)],1)],1),n("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[n("el-button",{on:{click:function(e){t.dialogVisible=!1}}},[t._v("取 消")]),n("el-button",{attrs:{type:"primary"},on:{click:function(e){return t.handleDialogConfirm()}}},[t._v("确 定")])],1)],1)],1)},i=[],s=n("dfaf"),l={name:null,description:null,status:1},o={pageNum:1,pageSize:5},r={name:"index",data:function(){return{listQuery:Object.assign({},o),listData:[],total:null,listLoading:!1,dialogVisible:!1,role:Object.assign({},l),isEdit:!1}},created:function(){this.getList()},methods:{handleAdd:function(){this.dialogVisible=!0,this.isEdit=!1,this.role=Object.assign({},l)},handleUpdate:function(t,e){this.dialogVisible=!0,this.isEdit=!0,this.role=Object.assign({},e)},handleDialogConfirm:function(){var t=this;this.$confirm("是否确认该操作?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){t.isEdit?Object(s["g"])(t.role).then((function(e){console.log(e),1===e.status?(t.$message({message:"修改角色成功!",type:"success",duration:1e3}),t.dialogVisible=!1,t.getList()):t.$message({message:e.msg,type:"warning",duration:1e3})})).catch((function(e){t.$message({message:e.msg,type:"error",duration:1e3})})):Object(s["b"])(t.role).then((function(e){console.log(e),1===e.status?(t.$message({message:"添加角色成功!",type:"success",duration:1e3}),t.dialogVisible=!1,t.getList()):t.$message({message:e.msg,type:"warning",duration:1e3})})).catch((function(e){t.$message({message:e.msg,type:"error",duration:1e3})}))}))},getList:function(){var t=this;this.listLoading=!0,Object(s["q"])(this.listQuery).then((function(e){e&&1===e.status&&(t.listLoading=!1,t.listData=e.data.list,t.total=e.data.total)}))},handleSizeChange:function(t){this.listQuery.pageNum=1,this.listQuery.pageSize=t,this.getList()},handleCurrentChange:function(t){this.listQuery.pageNum=t,this.getList()},handleShowStatusChange:function(t,e){var n=this;this.$confirm("是否修改该角色的启用状态?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){Object(s["g"])({id:e.id,status:e.status}).then((function(t){console.log(t),1===t.status?(n.$message({message:"修改成功!",type:"success",duration:1e3}),n.getList()):n.$message({message:t.msg,type:"warning",duration:1e3})})).catch((function(t){n.$message({message:t.msg,type:"error",duration:1e3})}))}))},handleDelete:function(t,e){var n=this;this.$confirm("是否删除该角色?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){Object(s["e"])({id:e.id}).then((function(t){1===t.status?(n.$message({message:"删除成功!",type:"success",duration:1e3}),n.getList()):n.$message({message:t.msg,type:"warning",duration:1e3})})).catch((function(t){n.$message({message:t.msg,type:"error",duration:1e3})}))}))},handleSelectMenu:function(t,e){this.$router.push({path:"/um/allocMenu",query:{roleId:e.id}})}},filters:{timeFormat:function(t){return null===t||void 0===t||""===t?"暂无数据":t}}},u=r,c=n("2877"),d=Object(c["a"])(u,a,i,!1,null,"4d728148",null);e["default"]=d.exports}}]);
//# sourceMappingURL=chunk-2d20940b.3ea3d6b9.js.map